{"ast":null,"code":"import Chatkit from '@pusher/chatkit-client';\nimport axios from 'axios';\n\nfunction sendMessage(event) {\n  event.preventDefault();\n  const _this$state = this.state,\n        newMessage = _this$state.newMessage,\n        currentUser = _this$state.currentUser,\n        currentRoom = _this$state.currentRoom;\n  if (newMessage.trim() === '') return;\n  currentUser.sendMessage({\n    text: newMessage,\n    roomId: \"\".concat(currentRoom.id)\n  });\n  this.setState({\n    newMessage: ''\n  });\n}\n\nfunction toggleShow() {\n  console.log(\"ch\");\n  const showForm = this.state.showForm;\n  console.log(showForm);\n  this.setState({\n    showForm: !showForm\n  });\n}\n\nfunction toggleShowDmList() {\n  const show = this.ShowDmList;\n  this.setState({\n    showDmList: !show\n  });\n  console.log(this.ShowDmList);\n}\n\nfunction handleInput(event) {\n  if (event.target === undefined) {\n    console.log(event);\n    this.setState({\n      userIds: event\n    });\n  } else {\n    const _event$target = event.target,\n          value = _event$target.value,\n          name = _event$target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n}\n\nfunction connectToRoom(id = 'afa1c12e-b196-4bb4-b940-a1af439328be') {\n  const currentUser = this.state.currentUser;\n  this.setState({\n    messages: [],\n    showForm: false,\n    showDmList: false\n  });\n  return currentUser.subscribeToRoom({\n    roomId: \"\".concat(id),\n    messageLimit: 100,\n    hooks: {\n      onMessage: message => {\n        this.setState({\n          messages: [...this.state.messages, message]\n        });\n      },\n      onPresenceChanged: () => {\n        const currentRoom = this.state.currentRoom;\n        this.setState({\n          roomUsers: currentRoom.users.sort(a => {\n            if (a.presence.state === 'online') return -1;\n            return 1;\n          })\n        });\n      }\n    }\n  }).then(currentRoom => {\n    const roomName = currentRoom.customData && currentRoom.customData.isDirectMessage ? currentRoom.customData.userIds.filter(id => id !== currentUser.id)[0] : currentRoom.name;\n    this.setState({\n      currentRoom,\n      roomUsers: currentRoom.users,\n      rooms: currentUser.rooms,\n      roomName\n    });\n  }).catch(console.error);\n}\n\nfunction connectToChatkit(event) {\n  event.preventDefault();\n  const userId = this.state.userId;\n\n  if (userId === null || userId.trim() === '') {\n    alert('Invalid userId');\n    return;\n  }\n\n  this.setState({\n    isLoading: true\n  });\n  axios.post('http://localhost:5200/get_users').then(users => {\n    let user_list = users.data;\n    this.setState({\n      users: user_list\n    });\n  });\n  axios.post('http://localhost:5200/users', {\n    userId\n  }).then(() => {\n    const tokenProvider = new Chatkit.TokenProvider({\n      url: 'http://localhost:5200/authenticate'\n    });\n    const chatManager = new Chatkit.ChatManager({\n      instanceLocator: 'v1:us1:4811d398-69b5-472e-bfcf-e24d61e97f14',\n      userId,\n      tokenProvider\n    });\n    return chatManager.connect({\n      onAddedToRoom: room => {\n        const rooms = this.state.rooms;\n        this.setState({\n          rooms: [...rooms, room]\n        });\n      }\n    }).then(currentUser => {\n      this.setState({\n        currentUser,\n        showLogin: false,\n        isLoading: false,\n        rooms: currentUser.rooms\n      }, () => connectToRoom.call(this));\n    });\n  }).catch(console.error);\n}\n\nfunction createPrivateRoom(id) {\n  const _this$state2 = this.state,\n        currentUser = _this$state2.currentUser,\n        rooms = _this$state2.rooms;\n  const roomName = \"\".concat(currentUser.id, \"_\").concat(id);\n  const isPrivateChatCreated = rooms.filter(room => {\n    if (room.customData && room.customData.isDirectMessage) {\n      const arr = [currentUser.id, id];\n      const userIds = room.customData.userIds;\n\n      if (arr.sort().join('') === userIds.sort().join('')) {\n        return {\n          room\n        };\n      }\n    }\n\n    return false;\n  });\n\n  if (isPrivateChatCreated.length > 0) {\n    return Promise.resolve(isPrivateChatCreated[0]);\n  }\n\n  return currentUser.createRoom({\n    name: \"\".concat(roomName),\n    private: true,\n    addUserIds: [\"\".concat(id)],\n    customData: {\n      isDirectMessage: true,\n      userIds: [currentUser.id, id]\n    }\n  });\n}\n\nfunction createGroupRoom() {\n  const name = this.state.channelName;\n  const ids = this.state.userIds;\n  const _this$state3 = this.state,\n        currentUser = _this$state3.currentUser,\n        rooms = _this$state3.rooms;\n  const roomName = \"\".concat(name);\n  const isPrivateChatCreated = rooms.filter(room => {\n    if (room.customData && room.customData.isDirectMessage) {\n      const arr = ids.concat(currentUser.id);\n      const userIds = room.customData.userIds;\n\n      if (arr.sort().join('') === userIds.sort().join('')) {\n        return {\n          room\n        };\n      }\n    }\n\n    return false;\n  });\n\n  if (isPrivateChatCreated.length > 0) {\n    return Promise.resolve(isPrivateChatCreated[0]);\n  }\n\n  return currentUser.createRoom({\n    name: roomName,\n    private: true,\n    addUserIds: ids\n  });\n}\n\nfunction sendDM(id) {\n  createPrivateRoom.call(this, id).then(room => {\n    connectToRoom.call(this, room.id);\n  });\n}\n\nfunction sendGroupMessage() {\n  createGroupRoom.call(this).then(room => {\n    connectToRoom.call(this, room.id);\n  });\n}\n\nexport { sendMessage, handleInput, connectToRoom, connectToChatkit, sendDM, sendGroupMessage, toggleShow, toggleShowDmList };","map":{"version":3,"sources":["/Users/dheerajthasmaravindranath/hobby/chat-app/client/slack/src/helper.js"],"names":["Chatkit","axios","sendMessage","event","preventDefault","state","newMessage","currentUser","currentRoom","trim","text","roomId","id","setState","toggleShow","console","log","showForm","toggleShowDmList","show","ShowDmList","showDmList","handleInput","target","undefined","userIds","value","name","connectToRoom","messages","subscribeToRoom","messageLimit","hooks","onMessage","message","onPresenceChanged","roomUsers","users","sort","a","presence","then","roomName","customData","isDirectMessage","filter","rooms","catch","error","connectToChatkit","userId","alert","isLoading","post","user_list","data","tokenProvider","TokenProvider","url","chatManager","ChatManager","instanceLocator","connect","onAddedToRoom","room","showLogin","call","createPrivateRoom","isPrivateChatCreated","arr","join","length","Promise","resolve","createRoom","private","addUserIds","createGroupRoom","channelName","ids","concat","sendDM","sendGroupMessage"],"mappings":"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","sourcesContent":["import Chatkit from '@pusher/chatkit-client';\nimport axios from 'axios';\n\nfunction sendMessage(event) {\n  event.preventDefault();\n  const { newMessage, currentUser, currentRoom } = this.state;\n\n  if (newMessage.trim() === '') return;\n\n  currentUser.sendMessage({\n    text: newMessage,\n    roomId: `${currentRoom.id}`,\n  });\n\n  this.setState({\n    newMessage: '',\n  });\n}\n\nfunction toggleShow(){\n  console.log(\"ch\")\n  const {showForm} = this.state;\n  console.log(showForm)\n  this.setState({\n    showForm: !showForm\n  });\n}\n\nfunction toggleShowDmList(){\n  const show = this.ShowDmList\n  this.setState({\n    showDmList: !show\n  });\n  console.log(this.ShowDmList)\n}\n\nfunction handleInput(event) {\n  if(event.target === undefined){\n    console.log(event)\n    this.setState({\n      userIds: event,\n    });\n  }else{\n    const { value, name } = event.target;\n    this.setState({\n      [name]: value,\n    });\n  }\n}\n\nfunction connectToRoom(id = 'afa1c12e-b196-4bb4-b940-a1af439328be') {\n  const { currentUser } = this.state;\n\n  this.setState({\n    messages: [],\n    showForm: false,\n    showDmList: false\n  });\n\n  return currentUser\n    .subscribeToRoom({\n      roomId: `${id}`,\n      messageLimit: 100,\n      hooks: {\n        onMessage: message => {\n          this.setState({\n            messages: [...this.state.messages, message],\n          });\n        },\n        onPresenceChanged: () => {\n          const { currentRoom } = this.state;\n          this.setState({\n            roomUsers: currentRoom.users.sort(a => {\n              if (a.presence.state === 'online') return -1;\n\n              return 1;\n            }),\n          });\n        },\n      },\n    })\n    .then(currentRoom => {\n      const roomName =\n        currentRoom.customData && currentRoom.customData.isDirectMessage\n          ? currentRoom.customData.userIds.filter(\n              id => id !== currentUser.id\n            )[0]\n          : currentRoom.name;\n\n      this.setState({\n        currentRoom,\n        roomUsers: currentRoom.users,\n        rooms: currentUser.rooms,\n        roomName,\n      });\n    })\n    .catch(console.error);\n}\n\nfunction connectToChatkit(event) {\n  event.preventDefault();\n\n  const { userId } = this.state;\n\n  if (userId === null || userId.trim() === '') {\n    alert('Invalid userId');\n    return;\n  }\n\n  this.setState({\n    isLoading: true,\n  });\n\n  axios.post('http://localhost:5200/get_users')\n    .then((users) => {\n      let user_list = users.data\n      this.setState({\n        users: user_list\n      });\n    })\n\n  axios\n    .post('http://localhost:5200/users', { userId })\n    .then(() => {\n      const tokenProvider = new Chatkit.TokenProvider({\n        url: 'http://localhost:5200/authenticate',\n      });\n\n      const chatManager = new Chatkit.ChatManager({\n        instanceLocator: 'v1:us1:4811d398-69b5-472e-bfcf-e24d61e97f14',\n        userId,\n        tokenProvider,\n      });\n\n      return chatManager\n        .connect({\n          onAddedToRoom: room => {\n            const { rooms } = this.state;\n            this.setState({\n              rooms: [...rooms, room],\n            });\n          },\n        })\n        .then(currentUser => {\n          this.setState(\n            {\n              currentUser,\n              showLogin: false,\n              isLoading: false,\n              rooms: currentUser.rooms\n            },\n            () => connectToRoom.call(this)\n          );\n        });\n    })\n    .catch(console.error);\n}\n\nfunction createPrivateRoom(id) {\n  const { currentUser, rooms } = this.state;\n  const roomName = `${currentUser.id}_${id}`;\n\n  const isPrivateChatCreated = rooms.filter(room => {\n    if (room.customData && room.customData.isDirectMessage) {\n      const arr = [currentUser.id, id];\n      const { userIds } = room.customData;\n\n      if (arr.sort().join('') === userIds.sort().join('')) {\n        return {\n          room,\n        };\n      }\n    }\n\n    return false;\n  });\n\n  if (isPrivateChatCreated.length > 0) {\n    return Promise.resolve(isPrivateChatCreated[0]);\n  }\n\n  return currentUser.createRoom({\n    name: `${roomName}`,\n    private: true,\n    addUserIds: [`${id}`],\n    customData: {\n      isDirectMessage: true,\n      userIds: [currentUser.id, id],\n    },\n  });\n}\n\nfunction createGroupRoom() {\n  const name = this.state.channelName;\n  const ids = this.state.userIds;\n  const { currentUser, rooms } = this.state;\n  const roomName = `${name}`;\n\n  const isPrivateChatCreated = rooms.filter(room => {\n    if (room.customData && room.customData.isDirectMessage) {\n      const arr = ids.concat(currentUser.id);\n      const { userIds } = room.customData;\n\n      if (arr.sort().join('') === userIds.sort().join('')) {\n        return {\n          room,\n        };\n      }\n    }\n\n    return false;\n  });\n\n  if (isPrivateChatCreated.length > 0) {\n    return Promise.resolve(isPrivateChatCreated[0]);\n  }\n\n  return currentUser.createRoom({\n    name: roomName,\n    private: true,\n    addUserIds: ids\n  });\n}\n\nfunction sendDM(id) {\n  createPrivateRoom.call(this, id).then(room => {\n    connectToRoom.call(this, room.id);\n  });\n}\n\nfunction sendGroupMessage() {\n  createGroupRoom.call(this).then(room => {\n    connectToRoom.call(this, room.id);\n  });\n}\n\nexport { sendMessage, handleInput, connectToRoom, connectToChatkit, sendDM, sendGroupMessage, toggleShow, toggleShowDmList };\n"]},"metadata":{},"sourceType":"module"}